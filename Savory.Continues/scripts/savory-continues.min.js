function ContinuesService(n,t){var i=n("",{},{project_items:{method:"POST",url:"/api/project/items"},project_item:{method:"POST",url:"/api/project/item"},project_count:{method:"POST",url:"/api/project/count"},project_create:{method:"POST",url:"/api/project/create"},project_update:{method:"POST",url:"/api/project/update"},build_setup:{method:"POST",url:"/api/build/setup"},build_create:{method:"POST",url:"/api/build/create"},process_items:{method:"POST",url:"/api/process/items"},process_item:{method:"POST",url:"/api/process/item"},process_count:{method:"POST",url:"/api/process/count"},process_create:{method:"POST",url:"/api/process/create"},process_update:{method:"POST",url:"/api/process/update"}});return{project_items:function(n){var r=t.defer();return i.project_items({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},project_item:function(n){var r=t.defer();return i.project_item({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},project_count:function(n){var r=t.defer();return i.project_count({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},project_create:function(n){var r=t.defer();return i.project_create({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},project_update:function(n){var r=t.defer();return i.project_update({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},build_setup:function(n){var r=t.defer();return i.build_setup({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},build_create:function(n){var r=t.defer();return i.build_create({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},process_items:function(n){var r=t.defer();return i.process_items({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},process_item:function(n){var r=t.defer();return i.process_item({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},process_count:function(n){var r=t.defer();return i.process_count({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},process_create:function(n){var r=t.defer();return i.process_create({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},process_update:function(n){var r=t.defer();return i.process_update({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise}}}function WelcomeController(){}function ProjectListController(n,t){function i(t){t.status==1&&(n.projects=t.projects)}function r(t){t.status==1&&(n.totalCount=t.totalCount)}n.refresh=function(){var u={};u.pageIndex=n.currentPage;t.project_items(u).then(i);u={};t.project_count(u).then(r)};n.pageChanged=function(){var r={};r.pageIndex=n.currentPage;t.project_items(r).then(i)};n.maxSize=10;n.currentPage=1;n.pageIndex=1;n.pageSize=15;n.refresh()}function ProjectItemController(n,t,i,r,u){function e(t){t.status==1&&(n.title=t.project.name,n.project=t.project)}function o(n){n.status==1?swal({title:"成功",text:"初始化成功",timer:500,showConfirmButton:!1,type:"success"}):swal({title:"失败",text:n.message,type:"error"})}n.name=i.name;n.name||t.go("continues.project.list");n.title=n.name;n.setup=function(){var t={};t.name=n.project.name;u.build_setup(t).then(o)};n.triggerBuild=function(){var t=r.open({animation:!0,templateUrl:"/scripts/view/view_build_create.html?v="+window.version,controller:BuildCreateController,size:"lg",keyboard:!1,backdrop:"static",resolve:{name:function(){return n.project.name}}});t.result.then(function(){window.open(window.jenkinsHost+"/job/"+n.name)},function(n){console.log(n)})};var f={};f.name=n.name;u.project_item(f).then(e)}function ProjectCreateController(n,t,i){function u(t){t.status==1&&(n.processes=t.processes)}function f(n){if(n.status!=1){swal({title:"提示信息",text:n.message,type:"error"});return}swal({title:"提示信息",text:"创建成功",type:"success",timer:1e3,showConfirmButton:!1});t.go("continues.project.list")}n.project={};n.selectProcess=function(t){var u,i,r;if(n.project.templateName=t.name,n.process=t,t.params!=null&&t.params.length>0){for(u=[],i=0;i<t.params.length;i++)r={},r.key=t.params[i].key,r.defaultValue=t.params[i].defaultValue,r.description=t.params[i].description,r.value=t.params[i].defaultValue,u.push(r);n.project.params=u}};n.confirmCreate=function(){var t={};t.project=n.project;i.project_create(t).then(f)};var r={};r.pageIndex=1;i.process_items(r).then(u)}function ProjectUpdateController(n,t,i,r){function f(t){t.status==1&&(n.processes=t.processes)}function e(t){t.status==1&&(n.project=t.project)}function o(i){i.status==1&&(swal({title:"提示信息",text:"更新成功",type:"success",timer:1e3,showConfirmButton:!1}),t.go("continues.project.item",{name:n.name}))}var u;n.name=i.name;n.name||t.go("continues.project.list");n.title=n.name;n.selectProcess=function(t){var u,i,r;if(n.project.templateName=t.name,n.process=t,t.params!=null&&t.params.length>0){for(u=[],i=0;i<t.params.length;i++)r={},r.key=t.params[i].key,r.defaultValue=t.params[i].defaultValue,r.description=t.params[i].description,r.value=t.params[i].defaultValue,u.push(r);n.project.params=u}};n.confirmUpdate=function(){var t={};t.project=n.project;r.project_update(t).then(o)};u={};u.pageIndex=1;r.process_items(u).then(f);u={};u.name=n.name;r.project_item(u).then(e)}function BuildListController(){}function BuildItemController(){}function BuildCreateController(n,t,i,r){function u(t){n.waiting=!1;t.status==1?i.close("success"):n.message=t.message}n.name=r;n.branch="master";n.version=moment().format("YYYYMMDDHHmmss");n.confirmCreateVersion=function(){n.waiting=!0;n.message=null;var i={};i.name=n.name;i.branch=n.branch;i.version=n.version;t.build_create(i).then(u)};n.closeDialog=function(){i.dismiss("取消新增版本")}}function ProcessListController(n,t){function i(t){t.status==1&&(n.processes=t.processes)}function r(t){t.status==1&&(n.totalCount=t.totalCount)}n.refresh=function(){var u={};u.pageIndex=n.currentPage;t.process_items(u).then(i);u={};t.process_count(u).then(r)};n.pageChanged=function(){var r={};r.pageIndex=n.currentPage;t.process_items(r).then(i)};n.maxSize=10;n.currentPage=1;n.pageIndex=1;n.pageSize=15;n.refresh()}function ProcessCreateController(n,t,i){function r(n){n.status==1&&(swal({title:"提示信息",text:"创建成功",type:"success",timer:1e3,showConfirmButton:!1}),t.go("continues.process.list"))}n.process={};n.addStep=function(){n.process.steps==null&&(n.process.steps=[]);n.process.steps.push({})};n.removeStep=function(t){for(var i=0;i<n.process.steps.length;i++)n.process.steps[i]==t&&n.process.steps.splice(i,1)};n.addParam=function(){n.process.params==null&&(n.process.params=[]);n.process.params.push({})};n.removeParam=function(t){for(var i=0;i<n.process.params.length;i++)n.process.params[i]==t&&n.process.params.splice(i,1)};n.confirmCreate=function(){var t={};t.process=n.process;i.process_create(t).then(r)}}function ProcessItemController(n,t,i,r){function f(t){t.status==1&&(n.title=t.process.name,n.process=t.process)}n.name=i.name;n.name||t.go("continues.process.list");n.title=n.name;var u={};u.name=n.name;r.process_item(u).then(f)}function ProcessUpdateController(n,t,i,r){function f(t){t.status==1&&(n.process=t.process)}function e(i){i.status==1&&(swal({title:"提示信息",text:"更新成功",type:"success",timer:1e3,showConfirmButton:!1}),t.go("continues.process.item",{name:n.name}))}n.name=i.name;n.name||t.go("continues.process.list");n.title=n.name;var u={};u.name=n.name;r.process_item(u).then(f);n.addStep=function(){n.process.steps==null&&(n.process.steps=[]);n.process.steps.push({})};n.removeStep=function(t){for(var i=0;i<n.process.steps.length;i++)n.process.steps[i]==t&&n.process.steps.splice(i,1)};n.addParam=function(){n.process.params==null&&(n.process.params=[]);n.process.params.push({})};n.removeParam=function(t){for(var i=0;i<n.process.params.length;i++)n.process.params[i]==t&&n.process.params.splice(i,1)};n.confirmUpdate=function(){var t={};t.process=n.process;r.process_update(t).then(e)}}var ContinuesRoute=function(n,t){t.when("","/welcome").when("/","/welcome");t.otherwise("/404");n.state("continues",{url:"/"});n.state("continues.welcome",{url:"welcome",templateUrl:"/scripts/view/view_welcome.html?v="+window.version,controller:WelcomeController});n.state("continues.404",{url:"404",templateUrl:"/scripts/view/view_404.html?v="+window.version});n.state("continues.project",{});n.state("continues.project.list",{url:"project-list",templateUrl:"/scripts/view/view_project_list.html?v="+window.version,controller:ProjectListController});n.state("continues.project.item",{url:"project-item/:name",templateUrl:"/scripts/view/view_project_item.html?v="+window.version,controller:ProjectItemController});n.state("continues.project.create",{url:"project-create",templateUrl:"/scripts/view/view_project_create.html?v="+window.version,controller:ProjectCreateController});n.state("continues.project.update",{url:"project-update/:name",templateUrl:"/scripts/view/view_project_update.html?v="+window.version,controller:ProjectUpdateController});n.state("continues.build",{});n.state("continues.build.list",{url:"build-list",templateUrl:"/scripts/view/view_build_list.html?v="+window.version,controller:BuildListController});n.state("continues.build.item",{url:"build-item",templateUrl:"/scripts/view/view_build_item.html?v="+window.version,controller:BuildItemController});n.state("continues.process",{});n.state("continues.process.list",{url:"process-list",templateUrl:"/scripts/view/view_process_list.html?v="+window.version,controller:ProcessListController});n.state("continues.process.create",{url:"process-create",templateUrl:"/scripts/view/view_process_create.html?v="+window.version,controller:ProcessCreateController});n.state("continues.process.item",{url:"process-item/:name",templateUrl:"/scripts/view/view_process_item.html?v="+window.version,controller:ProcessItemController});n.state("continues.process.update",{url:"process-update/:name",templateUrl:"/scripts/view/view_process_update.html?v="+window.version,controller:ProcessUpdateController})},app=angular.module("app",["ngResource","ui.router","ui.bootstrap","ui.sortable"]);app.config(ContinuesRoute);app.service("ContinuesService",["$resource","$q",ContinuesService]);